<html lang="en">
    <div class="transparentbox">
    <%- include('./partials/header.ejs') %>
    <body>
        <%- include('./partials/nav.ejs') %>
        <div class="search content">
            <form action="/search" method="POST">
                </br> 
                <% if (mongoResults.length > 0 || postgresResults.length > 0) { %>
                    <% if (mongoResults.length > 0) { %>
                        <h3>MongoDB Results:</h3>
                        <% mongoResults.forEach(item => { %>
                            <b><%= item.title %></b></br>
                            <b>Ingredients:</b> <%= item.ingredients.join(', ') %></br>
                            <b>Instructions:</b> <%= item.instructions %></br>
                            <b>Cuisine:</b> <%= item.cuisine %></br>
                            <% if (item.dietaryRestrictions && Array.isArray(item.dietaryRestrictions)) { %>
                                <b>Dietary Restrictions:</b> <%= item.dietaryRestrictions.join(', ') %></br>
                            <% } else { %>
                                <b>Dietary Restrictions:</b> None</br>
                            <% } %>
                            <b>Prep Time:</b> <%= item.prepTime %> minutes</br>
                            <b>Cook Time:</b> <%= item.cookTime %> minutes</br>
                            <b>Nutrition:</b> Calories: <%= item.nutrition.calories %>, Protein: <%= item.nutrition.protein %>g, Fat: <%= item.nutrition.fat %>g, Carbs: <%= item.nutrition.carbs %>g</br>
                            <b>Rating:</b> <%= item.rating %></br>
                            <b>Author:</b> <%= item.author %></br>
                            </br>
                        <% }) %>
                    <% } %>
                    <% if (postgresResults.length > 0) { %>
                        <h3>PostgreSQL Results:</h3>
                        <% postgresResults.forEach(item => { %>
                            <b><%= item.title %></b></br>
                            <b>Ingredients:</b> <%= item.ingredients.join(', ') %></br>
                            <b>Instructions:</b> <%= item.instructions %></br>
                            <b>Cuisine:</b> <%= item.cuisine %></br>
                            <% if (item.dietaryRestrictions && Array.isArray(item.dietaryRestrictions)) { %>
                                <b>Dietary Restrictions:</b> <%= item.dietaryRestrictions.join(', ') %></br>
                            <% } else { %>
                                <b>Dietary Restrictions:</b> None</br>
                            <% } %>
                            <b>Prep Time:</b> <%= item.prepTime %> minutes</br>
                            <b>Cook Time:</b> <%= item.cookTime %> minutes</br>
                            <b>Nutrition:</b> Calories: <%= item.nutrition.calories %>, Protein: <%= item.nutrition.protein %>g, Fat: <%= item.nutrition.fat %>g, Carbs: <%= item.nutrition.carbs %>g</br>
                            <b>Rating:</b> <%= item.rating %></br>
                            <b>Author:</b> <%= item.author %></br>
                            </br>
                        <% }) %>
                    <% } %>
                <% } else { %>
                    <p>No search results.</p>
                <% } %>
                </br><label>Recipe Search:</label></br>
                <label>Keyword:
                    <input type="text" id="keyword" name="keyword" value="<%= locals.keyword %>" required>
                </label>
                </br>
                <button>POST</button>
            </form>
        </div>
        <%- include('./partials/status.ejs') %>
        </br>
        <%- include('./partials/auth.ejs') %>
    </body>
    <%- include('./partials/footer.ejs') %>
    </div>
</html>